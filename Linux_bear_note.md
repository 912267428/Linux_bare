# ARM裸机（IML6ULL）

## Cortex-A7 MPCore

### Cortex-A 处理器运行模型

| 模式            | 描述                                                     |
| --------------- | -------------------------------------------------------- |
| User(USR)       | 用户模式，非特权模式，大部分程序运行的时候就处于此模式。 |
| FIQ             | 快速中断模式，进入 FIQ 中断异常                          |
| IRQ             | 一般中断模式。                                           |
| Supervisor(SVC) | 超级管理员模式，特权模式，供操作系统使用。               |
| Monitor(MON)    | 监视模式？这个模式用于安全扩展模式。                     |
| Abort(ABT)      | 数据访问终止模式，用于虚拟存储以及存储保护。             |
| Hyp(HYP)        | 超级监视模式？用于虚拟化扩展。                           |
| Undef(UND)      | 未定义指令终止模式。                                     |
| System(SYS)     | 系统模式，用于运行特权级的操作系统任务                   |

### Cortex-A 寄存器组

![image-20230907010037720](Image\1.png)

前面提到的每一种运行模式都有一组与之对应的寄存器组，这些寄存器中，有些是所有模式所共用的同一个物理寄存器，有一些是各模式自己所独立拥有的

![image-20230907010210012](Image\2.png)

#### 通用寄存器

R0~R15 就是通用寄存器，通用寄存器可以分为以下三类：

1. 未备份寄存器，即 R0~R7。
2. 备份寄存器，即 R8~R14。
3. 程序计数器 PC，即 R15。  R15 (PC)值 = 当前执行的程序位置 + 8 个字节

#### CPSR  程序状态寄存器

所有的处理器模式都共用一个 CPSR 物理寄存器，因此 CPSR 可以在任何模式下被访问。CPSR 是当前程序状态寄存器，该寄存器包含了条件标志位、中断禁止位、当前处理器模式标志 等一些状态位以及一些控制位。bit[4-0]是处理器模式控制位. 其他位见开发指南**293**页

## ARM汇编基本语法

### GNU 汇编语法

GNU 汇编语法适用于所有的架构，并不是 ARM 独享的，GNU 汇编由一系列的语句组成， 每行一条语句，每条语句有三个可选部分，如下：

```
label：instruction @ comment
```

**label** 即标号，表示地址位置，有些指令前面可能会有标号，这样就可以通过这个标号得到 指令的地址，标号也可以用来表示数据地址。注意 label 后面的“：”，任何以“：”结尾的标识 符都会被识别为一个标号。
**instruction** 即指令，也就是汇编指令或伪指令。
**comment** 就是注释内容。